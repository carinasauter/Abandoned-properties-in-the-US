<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <script src="https://d3js.org/d3.v4.js" charset="utf-8"></script>
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.0/mapbox-gl.js'></script>
    <!-- NEW: add turf.js  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/2.0.2/turf.min.js"></script>
    <!-- <script type="text/javascript" src="js/geojson.min.js"></script> -->
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.0/mapbox-gl.css' rel='stylesheet' />
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="vendor/scrollreveal/scrollreveal.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="js/creative.min.js"></script>


    <title>Infoviz Final Project - Team 3</title>
    

    <!-- Bootstrap Core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <!-- <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>

    <!-- Theme CSS -->
    <link rel="stylesheet" type="text/css" href="css/index.css">

</head>
<body id='page-top'>

	<nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
                </button>
                <a class="navbar-brand page-scroll" href="#page-top">Abandoned properties</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a class="page-scroll" href="#definition">What is it?</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#definition">Types</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#secondsection">Impact</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#portfolio">Show me</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#thirdsection">Case Study</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

	<header>
        <div class="header-content">
            <div class="header-content-inner">
                <h1 id="homeHeading">Abandoned Properties</h1>
                <h1 id ='homeHeading'>in the US</h1>
                <hr class="light">
                <a href="#definition" class="btn btn-primary btn-xl page-scroll">Scroll down to start</a>
            </div>
        </div>
	</header>

    <section id='definition'> 
        <div>
            <h1 style='text-align: center;'><i>What are abandoned properties?</i></h1>
            <br>
            <p style='text-align: center; margin-top: 10px;'>Abandoned properties fulfill at least one of the following conditions:</p>
            <br>
        </div>
        <div class ='parent'>
            <div class ='left'>
            </div>
            <div class='pic1'>
                <img src="img/police.png" style = 'width: 50%; float: left;'>
            </div>
            <div class='or' style='line-height: 20vh; text-align: center; vertical-align: middle;'>
            </div>
            <div class='pic2'>
                <img src="img/housecircle.png" style = 'width: 50%;'>
            </div>
            <div class='right'>
                
            </div>
        </div>

        <br>

        <div class ='parent'>
            <div class ='left'>
            </div>
            <div class='pic1' style='align-items: initial;'>
                <p>Pose a threat to public safety, meeting the definition of a public nuisance</p>
            </div>
            <div class='or' style='line-height: 20vh; text-align: center; vertical-align: middle;'>
                <p><i>or</i></p>
            </div>
            <div class='pic2' style='align-items: initial;'>
                <p>The owners or managers neglect the fundamental duties of property ownership such as failing to pay taxes or utilities or defaulting on mortgage payments</p>
            </div>
            <div class='right'>
            </div>
        </div>

    </section>

    <section id='firstsection' class="no-padding" id="portfolio">
        <h1 style='text-align: center;'>
        <i>Types of Abandoned Properties</i>
        </h1>
        <div class="container-fluid">
            <div class="row no-gutter popup-gallery">
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_house_pannel.jpg" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Residential
                                </div>
                                <div class="project-name">
                                    Top 10 cities of with highest vacancy rates in USA have near 110,000 abandoned residential properties (2016). Some of these cities have residential vacancy rates as high as 18.6%.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_military_pannel.png" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Military Bases
                                </div>
                                <div class="project-name">
                                    Fort Ord, USA is the large abandoned military base in the world, spanning 44 square miles. It was closed down in 1994 and cleaning operations continue. According to one report, over 50,000 unexploded ordinances have been collected till 2014 and the process is likely to continue till 2022.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_factory_pannel.png" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Factories
                                </div>
                                <div class="project-name">
                                    When robots take over manual work or cheap labor from other parts of the world attracts manufcaturing operations, whole factories get abandoned and thousands of jobs are lost. Factory employments have gone down by one third, from 17.6 million to 12.3 million, since 1998.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_station_pannel.png" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Train Stations
                                </div>
                                <div class="project-name">
                                    Numerous train stations lay abandoned or closed across America. For example, this Citcinati Subway (pictured below) was initiated in 1920s and eventually cancelled during the great depression after WWI. Initially planned to be completed with $6 million, it would now cost near $100 million to revive this system for subway use.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_park_pannel.png" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Parks
                                </div>
                                <div class="project-name">
                                    Several hundred amusement parks lay barren Nationwide for one reason or another. This Six Flags park in New Orleans covering 140 acre land, was destroyed by hurriace Katrina in 2005 and is closed since, due to exhorbitant repair costs. It is in extremely poor condition and has become a safety hazard.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-sm-6">
                    <div class="portfolio-box">
                        <img src="assets/icon_ghost_town.png" class="img-responsive" alt="">
                        <div class="portfolio-box-caption">
                            <div class="portfolio-box-caption-content">
                                <div class="project-category text-faded">
                                    Ghost Towns
                                </div>
                                <div class="project-name">
                                    The famous gold rush of 1800s, copper mining adventures and failed railroad projects, led to development of numerous small towns that were left in dust and disappointment afterwards. The California gold rush itself attracted over 300,000 people from all over America and abroad. There are hundreds of such ghost towns in the country that are either deserted or serving as a tourist resort.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="secondsection">
        <div id="sec_causes">
            <h2>
                WHY DO PROPERTIES GET ABANDONDED?
            </h2>
<!--            <img id="nav_img" src="assets/nav_causes.png" height="100%" width="76%">-->
            <div id="causes_viz">  
                <script>
                    // The stacked bar chart is adapted from Mike Foster's workshop http://duspviz.mit.edu/d3-workshop/intro-to-d3/

                    // New dataset read from CSV
                    var popData = [];

                    d3.csv("data/city_pop.csv", function(d) {
                        return {
                            city : d.city, // city name
                            peak : +d.peak, // force population value to be number (+)
                            now_pop: +d.now_pop // 2010 population
                        };
                    }, function(error, rows) { // catch error if error, read rows
                        popData = rows; // set popData equal to rows
                        console.log(popData);
                        createVisualization(); // call function to create chart
                    });


                    function createVisualization(){
                        // Width and height of SVG
                        var w = 1180;
                        var h = 300;

                        // Get length of dataset
                        var arrayLength = popData.length; // length of dataset
                        var maxValue = d3.max(popData, function(d) { return +d.peak;} ); // get max value of our dataset
                        var x_axisLength = w-50; // length of x-axis in our layout
                        var y_axisLength = h-50; // length of y-axis in our layout

                        // Create y scales
                        var yScale = d3.scaleLinear()
                        .domain([0, maxValue])
                        .range([0, y_axisLength]);

                        //Create SVG element
                        var svg = d3.select("#causes_viz")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

                        // Select and generate rectangle elements
                        svg.selectAll( "rect.peak" )
                            .data( popData )
                            .enter()
                            .append("rect")
                            .attr( "x", function(d,i){
                            return (x_axisLength/arrayLength)*i + 30;  } )
                            .attr( "y", function(d) {
                            return h - yScale(d.peak);  } )
                            .attr( "width", (x_axisLength/arrayLength)-5 )
                            .attr( "height", function(d){
                            return yScale(d.peak); })
                            .attr( "fill", "#000")
                        //                        .attr( "fill", "#778899")
                            .attr("stroke", "orange") //"#D85F41") //"#DFD6D6") // lightblue
                            .attr("stroke-width", "1px")
                            .on("mouseover", function(d){
                            return tooltip.style("visibility", "visible").html(d.city + "<br>" + "Peak population: " +d3.format(",")(d.peak) + "<br>" + 
                                                                               "2010 Population: " + +d3.format(",")(d.now_pop));
                        })
                            .on("mousemove", function(d){
                            return tooltip.style("top", (event.pageY-45)+"px").style("left",(event.pageX+5)+"px").html(d.city + "<br>" + "Peak population: " + d3.format(",")(d.peak) + "<br>" + "2010 Population: " + d3.format(",")(d.now_pop));
                        })
                            .on("mouseout", function(d){
                            return tooltip.style("visibility", "hidden");
                        });

                        // create second stack
                        svg.selectAll( "rect.now" )
                            .data( popData )
                            .enter()
                            .append("rect")
                            .attr( "x", function(d,i){
                            return (x_axisLength/arrayLength)*i + 30;  } )
                            .attr( "y", function(d) {
                            return h - yScale(d.now_pop);  } )
                            .attr( "width", (x_axisLength/arrayLength)-5 )
                            .attr( "height", function(d){
                            return yScale(d.now_pop); })
                            .attr( "fill", "orange") //"#D85F41")
                            .on("mouseover", function(d){
                            return tooltip.style("visibility", "visible").html(d.city + "<br>" + "Peak population: " +d3.format(",")(d.peak) + "<br>" + "2010 Population: " + +d3.format(",")(d.now_pop));
                        })
                            .on("mousemove", function(d){
                            return tooltip.style("top", (event.pageY-45)+"px").style("left",(event.pageX+5)+"px").html(d.city + "<br>" + "Peak population: " + d3.format(",")(d.peak) + "<br>" + "2010 Population: " + d3.format(",")(d.now_pop));
                        })
                            .on("mouseout", function(d){
                            return tooltip.style("visibility", "hidden");
                        });

                        // Add axes
                        svg.append("line")
                            .attr("x1", 25)
                            .attr("x2", 30 + x_axisLength)
                            .attr("y1", h)
                            .attr("y2", h)
                            .attr("stroke-width", 2)
                            .attr("stroke", "white");

                        svg.append("text")
                            .attr("class", "y label")
                            .attr("text-anchor", "end")
                            .text("Population")
                            .attr("transform", "translate(15, 150) rotate(-90)");

                        var tooltip = d3.select("body")
                        .append("div")
                        .style("position", "absolute")
                        .style("font-family", "'Open Sans', sans-serif")
                        .style("font-size", "12px")
                        .style("color", "black")
                        .style("background", "white")
                        .style("padding", "4px")
                        .style("border-radius", "6px")
                        .style("opacity", 0.8)
                        .style("border", "0px")
                        .style("z-index", "10")
                        .style("visibility", "hidden");
                    };
                </script>
            </div>
        </div>      
    </section>
	
	<section id="thirdsection">
		<div>
			<p>Introduction/Description of Tableau graph</p>
            <div class='tableauPlaceholder' id='viz1493193539435' style='position: relative'><noscript><a href='#'><img alt='Vacancy Rate Compared with Other City Characteristics ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ab&#47;AbandonedEffects&#47;Story1_1&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='site_root' value='' /><param name='name' value='AbandonedEffects&#47;Story1_1' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Ab&#47;AbandonedEffects&#47;Story1_1&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1493193539435');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='1370px';vizElement.style.height='837px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
		</div>	
	</section>

    <section id='case_study'>

    <div id='subheader'>
    A case study on Chicago
    </div>
        
    </section>
    <section id="transition">
        <div >
        <p></p><br>
            <img id='Timeline' class="center-block" style="max-width:75%;" src="img/Timeline6.jpg" alt="Chicago Timeline">
        </div>
    </section>
    
    <section id="finalsection">
    <div>
    <h3>311 Calls for abandoned homes in Chicago</h3>
    <p>In an effort to fight blight, the City of Chicago introduced the opportunity for its citizens to report abandoned homes in their neighborhoods via 311 calls.</p> 
    <p>This map shows all 311 calls for abandoned homes that the city of Chicago received in 2016 and 2017. To explore the map, provide a location or double-click the map to zoom in.</p>
    <p>
     eg:<i> Ogden Park </i> or <i> 232 N Carpenter Street </i>
    </p>
    <input type="text" id="address"><br>
    <button type='button' id='showlocation' onclick="myFunction()">Show me the location</button>
    <button type='button' onclick ='myFunction2()'>Show me an overview</button>

    </div>


    <div id='map' style='bottom:0; width:50%; height: 50%; margin-top: 2%; float: left';>
        <script src="js/map.js"></script>
    </div>
    <div id = 'legend' style= 'margin-top: 2%; margin-left: 51%;'>
        <b> The economic impact of abandoned homes on adjacent property</b>
        <p>
            Each point represents the location of a house that the City of Chicago received a 311 call for between 2016 and 2017.</p>
        <p> <img src="img/legend.png" style='float:left; width: 20%; '> </p>
        <table style='width: 300px; padding-left: 100%; float: left;'>
            <caption>Impact on property prices</caption>
            <thead>
                <tr>
                    <th>Radius</th><th>monetary impact</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>within 150 ft: </td><td>-$7,627</td>
                </tr>
                <tr>
                    <td>within 300 ft: </td><td>-$6,819</td>
                </tr>
                <tr>
                    <td>within 450 ft: </td><td>-$3,542</td>
                </tr>
            </tbody>
        </table>
    </div>

    </section>

    <section id="sources">
    <div>
        <p>
        Created as a final project for I247 - Information Visualization and Presentation.
        </p>
        <p>
        The Github code for this project can be found <a href="https://github.com/carinasauter/InfoVizfinal">here</a>.
        </p>
        <p>
        Team members: <a href="https://www.linkedin.com/in/lizlee0225/">Liz Lee</a>, <a href="https://uraza.me/">Usman Raza</a> and <a href="http://www.carinasauter.com">Carina Sauter</a>
        </p>
    </div>  
    </section>

</body>